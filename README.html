<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>README</title>
  <link id="favicon" rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%220.9em%22 font-size=%22100%22>ðŸ“–</text></svg>">
  <link id="hljs-css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
  <style>
    #toc>ol ol {
      display: none
    }

    body {
      background-image: url("https://rweigel.github.io/biedit/img/paper.png")
    }

    .body {
      display: flex;
      min-width: 50%;
      max-height: 100%;
      position: absolute;
      background-image: url("https://rweigel.github.io/biedit/img/paper.png");
    }

    #toc {
      flex: 0 1 auto;
      margin-top: 0em;
      margin-right: 1em;
      max-width: 12em;
      overflow: hidden auto;
    }

    #toc .toctext {
      color: darkblue;
    }

    #toc .toctext-empty {
      min-width: 1em;
      border-bottom: 1px solid blue;
    }

    #toc ol {
      margin: 0.25em 0em 0em 0.5em;
      list-style-type: decimal;
      padding-inline-start: 1em;
    }

    #toc a {
      text-decoration: none;
    }

    #display {
      flex: 1 1 80%;
      overflow: hidden auto;
      overflow-wrap: break-word;
    }

    #display .abstract {
      text-align: center;
      font-size: 100%;
      font-weight: bold;
      color: black;
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    #display .title {
      text-align: center;
      font-size: 150%;
      font-weight: bold;
      color: black;
      margin-top: 0.2em;
      margin-bottom: 0.2em;
    }

    #display .subtitle {
      text-align: center;
      font-size: 120%;
      font-weight: bold;
      color: black;
      margin-top: 0.2em;
    }

    #display .date {
      text-align: right;
      color: black;
    }

    #display .block {
      display: flex;
      flex: 1 1 auto;
    }

    #display .block>.comment {
      display: none;
    }

    #display .hr {
      width: 100%;
      height: 1px;
      display: block;
      margin: 0.5em;
      border-top: 1px solid black;
    }

    #display a {
      text-decoration-line: none;
      text-decoration-color: black;
      color: darkblue;
    }

    #display a.broken-internal-link {
      text-decoration-line: underline;
      text-decoration-style: wavy;
      text-underline-offset: 2px;
      text-decoration-color: red;
    }

    #display span.broken-internal-link {
      font-size: 0.75em;
      color: red;
    }

    #display a:focus-visible {
      outline: none;
      background-color: yellow;
    }

    #display p {
      width: 100%;
      display: block;
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    #display pre {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    #display h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      width: 100%;
      text-decoration: none;
      color: inherit;
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    #display h1 {
      color: darkblue;
      border-bottom: 2px solid darkblue;
    }

    #display h2 {
      border-bottom: 1px solid black;
    }

    #display h3 {
      border-bottom: 1px dotted black;
    }

    #display img {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
      max-width: 100%;
    }

    figure {
      display: block;
      margin-block: 0em;
      margin-inline: 0px;
    }

    details>summary {
      font-weight: bold;
    }

    details {
      padding-left: 0.5em;
    }

    details[open] {
      border: 1px solid black;
      padding: 0em 0em 0em 0.5em;
    }

    table {
      padding: 0px;
      display: block;
      width: 100%;
    }

    table tr {
      border-top: 1px solid rgb(204, 204, 204);
      background-color: white;
      margin: 0px;
      padding: 0px;
    }

    table tr:nth-child(2n) {
      background-color: rgb(248, 248, 248);
    }

    table tr th {
      font-weight: bold;
      border: 1px solid rgb(204, 204, 204);
      text-align: left;
      margin: 0px;
      padding: 6px 13px;
    }

    table tr td {
      border: 1px solid rgb(204, 204, 204);
      text-align: left;
      margin: 0px;
      padding: 6px 13px;
    }

    table tr th :first-child,
    table tr td :first-child {
      margin-top: 0px;
    }

    table tr th :last-child,
    table tr td :last-child {
      margin-bottom: 0px;
    }

    #display code {
      width: 100%;
      background-color: rgba(0, 0, 0, 0.03);
      border-radius: 0px;
      white-space: pre-wrap;
    }

    #display code~.line-number {
      margin-top: 3px;
      margin-right: 3px;
    }

    #display pre {
      width: 100%;
      text-indent: 0.75em;
      margin: 0.5em 0px;
      white-space: pre-wrap;
      border-left: 3px solid black;
      background-color: rgba(0, 0, 0, 0.03);
      line-height: 1.25;
      overflow-x: clip;
    }

    #display pre code {
      background-color: rgba(0, 0, 0, 0);
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display pre.language-python {}

    #display li>div {
      display: flex;
    }

    #display li {
      min-height: 1em;
      width: 100%;
    }

    #display ul {
      width: 100%;
      margin-top: 0.5em;
      margin-bottom: 0.5em;
      margin-left: 1em;
      padding-left: 0.35em;
    }

    #display ul.compact {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display ol {
      width: 100%;
      margin-left: 1em;
      padding-left: 0.5em;
    }

    #display>.section>.block &>ol.compact {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display>.section>.block>ol.loose {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    #display>.section>.block>ol.compact {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display ol.compact p {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display ol.loose p {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display ul.compact p {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display ul.loose p {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    .inline-html .block .block-info {
      display: none;
    }

    .inline-html {
      width: 100%;
    }

    .section>.block ol~.block-info {}

    .section>.block ul~.block-info {}

    .section>.block pre~.block-info {}

    .section>.block code~.block-info {}

    pre .block-info {
      font-size: 8px;
      text-align: right;
      text-indent: 0px;
    }

    .block-info {
      text-align: right;
      width: 24px;
      font-family: monospace;
      white-space: pre-line;
      overflow-wrap: break-word;
      font-size: 8px;
      border-top: 1px solid black;
      border-bottom: 1px solid black;
      border-right: 1px solid black;
    }

    .blockquote {
      width: 100%;
      display: block;
      margin: 1em;
      border: 1px solid black;
      padding: 1em;
      border-radius: 0.5em;
    }

    .inline {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    .latex-underline {
      text-decoration: underline;
    }

    .katex {
      font-size: inherit !important;
    }

    .katex-display {
      text-align: center;
      margin: 0em;
      font-size: 1em !important;
    }

    .katex-display.fleqn>.katex {
      padding-left: 0em;
      margin: 0em;
    }

    .katex-warning {
      border-right: 0.5em solid red;
    }

    .katex-error-expression {}

    .katex-error-message {
      color: red;
    }

    .page-break {
      break-after: page;
      width: 100%;
      font-size: 0px;
      border-top: 1px dotted black;
    }

    .solutionsfalse {
      display: none;
    }

    .solutionstrue {
      display: block;
    }

    @media print {
      * {
        overflow: visible !important;
      }

      @page {
        size: auto;
        margin: 0.5in 0.75in 0.75in;
      }

      .katex .hide-tail {
        overflow: hidden !important;
      }

      .page-break {
        border-top: none;
      }

      .body {
        display: inline;
        position: relative;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        width: 100%;
        margin-block: 0.1em;
      }

      h1 {
        font-size: 1.25em;
        color: black;
        border-bottom: 2px solid black;
      }

      h2 {
        font-size: 1.15em;
        border-bottom: 1px solid black;
      }

      h3 {
        font-size: 1.1em;
      }

      h4,
      h5,
      h6 {
        font-size: 1.05em;
      }

      .md-toc {
        break-inside: avoid;
        font-size: 14px;
      }

      pre {
        break-inside: avoid;
      }

      p {
        margin-top: 0.5em;
        margin-bottom: 0.5em;
      }

      #toc {
        display: none;
        font-size: 100%;
        margin: 0px;
        width: 100%;
        overflow-y: hidden;
        padding-left: 0px;
        padding-right: 0px;
      }

      #display {
        margin-left: 0em;
        width: 100%;
        padding-left: 0px;
        padding-right: 0px;
        border: none;
        overflow-wrap: break-word;
      }

      .katex {
        font: 1em / 1.1 KaTeX_Main, "Times New Roman", serif;
        white-space: nowrap;
        text-indent: 0px;
        text-rendering: auto;
      }

      .katex-display {
        margin-top: 0px !important;
        font-size: 1em !important;
      }
    }
  </style>
  <script>
    function tocClickListen() {
      let hs = document.querySelectorAll('#toc > ol ol');
      let el, ns;
      for (let i = 0; i < hs.length; i++) {
        if (hs[i].previousElementSibling) {
          el = hs[i].previousElementSibling.firstElementChild;
          if (el.length == 0) {
            continue;
          }
          el.addEventListener('click', event => {
            ns = event.target.parentNode.nextElementSibling;
            if (!ns) return;
            if (ns.style.display === 'none') {
    ns.style.display = 'block';
            } else
            {
    ns.style.display = 'none';}
          });
        }
      }
    }
    if (
        document.readyState === "complete" ||
        (document.readyState !== "loading" && 
          !document.documentElement.doScroll)
    ) {
      tocClickListen();
    } else {
      document.addEventListener("DOMContentLoaded", tocClickListen);
    }
  </script>
</head>

<body class="body">
  <div id="toc" style="min-width: 5em;">
    <ol>
      <li>
        <a href="#1-about" raw="# 1 About" lo="32">
          <span class="toctext">About</span>
        </a>
      </li>
      <li>
        <a href="#2-installation" raw="# 2 Installation" lo="56" class="">
          <span class="toctext">Installation</span>
        </a>
      </li>
      <li>
        <a href="#3-examples" raw="# 3 Examples" lo="67">
          <span class="toctext">Examples</span>
        </a>
        <ol class="toc" style="display: none;">
          <li>
            <a href="#31-list-of-examples" raw="## 3.1 List of Examples" lo="69">
              <span class="toctext">List of Examples</span>
            </a>
          </li>
          <li>
            <a href="#32-serve-data-from-a-minimal-python-program" raw="## 3.2 Serve data from a minimal Python program" lo="97">
              <span class="toctext">Serve data from a minimal Python program</span>
            </a>
          </li>
          <li>
            <a href="#33-serve-data-from-an-enhanced-python-program" raw="## 3.3 Serve data from an enhanced Python program" lo="121">
              <span class="toctext">Serve data from an enhanced Python program</span>
            </a>
          </li>
          <li>
            <a href="#34-serve-data-from-a-non-hapi-web-service" raw="## 3.4 Serve data from a non-HAPI web service" lo="151">
              <span class="toctext">Serve data from a non-HAPI web service</span>
            </a>
          </li>
          <li>
            <a href="#35-serve-data-stored-in-a-single-file" raw="## 3.5 Serve data stored in a single file" lo="163" class="">
              <span class="toctext">Serve data stored in a single file</span>
            </a>
          </li>
          <li>
            <a href="#36-serve-data-read-by-autoplot" raw="## 3.6 Serve data read by Autoplot" lo="175">
              <span class="toctext">Serve data read by Autoplot</span>
            </a>
          </li>
        </ol>
      </li>
      <li>
        <a href="#4-usage" raw="# 4 Usage" lo="207">
          <span class="toctext">Usage</span>
        </a>
      </li>
      <li>
        <a href="#5-server-configuration" raw="# 5 Server Configuration" lo="308">
          <span class="toctext">Server Configuration</span>
        </a>
        <ol class="toc" style="display: none;">
          <li>
            <a href="#51-conf-config.json" raw="## 5.1 conf/config.json" lo="310">
              <span class="toctext">conf/config.json</span>
            </a>
          </li>
          <li>
            <a href="#52-apache" raw="## 5.2 Apache" lo="358">
              <span class="toctext">Apache</span>
            </a>
          </li>
          <li>
            <a href="#53-nginx" raw="## 5.3 Nginx" lo="378">
              <span class="toctext">Nginx</span>
            </a>
          </li>
        </ol>
      </li>
      <li>
        <a href="#6-metadata" raw="# 6 Metadata" lo="393">
          <span class="toctext">Metadata</span>
        </a>
        <ol class="toc" style="display: none;">
          <li>
            <a href="#61-server" raw="## 6.1 server" lo="469">
              <span class="toctext">server</span>
            </a>
            <ol class="toc" style="display: none;">
              <li>
                <a href="#611-id-and-prefix" raw="### 6.1.1 `id` and `prefix`" lo="486">
                  <span class="toctext"><code type="md">id</code> and <code type="md">prefix</code></span>
                </a>
              </li>
              <li>
                <a href="#612-contact" raw="### 6.1.2 `contact`" lo="504">
                  <span class="toctext"><code type="md">contact</code></span>
                </a>
              </li>
              <li>
                <a href="#613-landingfile-and-landingpath" raw="### 6.1.3 `landingFile` and `landingPath`" lo="508">
                  <span class="toctext"><code type="md">landingFile</code> and <code type="md">landingPath</code></span>
                </a>
              </li>
              <li>
                <a href="#614-catalog-update" raw="### 6.1.4 `catalog-update`" lo="536">
                  <span class="toctext"><code type="md">catalog-update</code></span>
                </a>
              </li>
            </ol>
          </li>
          <li>
            <a href="#62-catalog" raw="## 6.2 catalog" lo="540">
              <span class="toctext">catalog</span>
            </a>
            <ol class="toc" style="display: none;">
              <li>
                <a href="#621-catalog_inline" raw="### 6.2.1 `catalog_inline`" lo="544">
                  <span class="toctext"><code type="md">catalog_inline</code></span>
                </a>
              </li>
              <li>
                <a href="#622-catalog_file" raw="### 6.2.2 `catalog_file`" lo="607">
                  <span class="toctext"><code type="md">catalog_file</code></span>
                </a>
              </li>
              <li>
                <a href="#623-catalog_url" raw="### 6.2.3 `catalog_url`" lo="612">
                  <span class="toctext"><code type="md">catalog_url</code></span>
                </a>
              </li>
              <li>
                <a href="#624-catalog_command" raw="### 6.2.4 `catalog_command`" lo="616">
                  <span class="toctext"><code type="md">catalog_command</code></span>
                </a>
              </li>
            </ol>
          </li>
        </ol>
      </li>
      <li>
        <a href="#7-development" raw="# 7 Development" lo="621">
          <span class="toctext">Development</span>
        </a>
      </li>
      <li>
        <a href="#8-contact" raw="# 8 Contact" lo="650">
          <span class="toctext">Contact</span>
        </a>
      </li>
    </ol>
  </div>
  <div id="display">
    <div class="section">
      <div class="block">
        <div class="comment" lo="1" lf="1">
          <!-- TOC -->
        </div>
        <div class="block-info" style="display: none;"><span class="line-numbers">1</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="2" lf="28"><a href="#1-about">1 About</a><br>
          <a href="#2-installation">2 Installation</a><br>
          <a href="#3-examples">3 Examples</a><br> &nbsp;&nbsp;&nbsp;<a href="#31-list-of-examples">3.1 List of Examples</a><br> &nbsp;&nbsp;&nbsp;<a href="#32-serve-data-from-a-minimal-python-program">3.2 Serve data from a minimal Python program</a><br> &nbsp;&nbsp;&nbsp;<a href="#33-serve-data-from-an-enhanced-python-program">3.3 Serve data from an enhanced Python program</a><br> &nbsp;&nbsp;&nbsp;<a href="#34-serve-data-from-a-non-hapi-web-service">3.4 Serve data from a non-HAPI web service</a><br> &nbsp;&nbsp;&nbsp;<a href="#35-serve-data-stored-in-a-single-file">3.5 Serve data stored in a single file</a><br> &nbsp;&nbsp;&nbsp;<a href="#36-serve-data-read-by-autoplot">3.6 Serve data read by Autoplot</a><br>
          <a href="#4-usage">4 Usage</a><br>
          <a href="#5-server-configuration">5 Server Configuration</a><br> &nbsp;&nbsp;&nbsp;<a href="#51-conf-config.json">5.1 conf/config.json</a><br> &nbsp;&nbsp;&nbsp;<a href="#52-apache">5.2 Apache</a><br> &nbsp;&nbsp;&nbsp;<a href="#53-nginx">5.3 Nginx</a><br>
          <a href="#6-metadata">6 Metadata</a><br> &nbsp;&nbsp;&nbsp;<a href="#61-server">6.1 server</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#611-id-and-prefix">6.1.1 id and prefix</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#612-contact">6.1.2 contact</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#613-landingfile-and-landingpath">6.1.3 landingFile and landingPath</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#614-catalog-update">6.1.4 catalog-update</a><br> &nbsp;&nbsp;&nbsp;<a href="#62-catalog">6.2 catalog</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#621-catalog_inline">6.2.1 catalog_inline</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#622-catalog_file">6.2.2 catalog_file</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#623-catalog_url">6.2.3 catalog_url</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#624-catalog_command">6.2.4 catalog_command</a><br>
          <a href="#7-development">7 Development</a><br>
          <a href="#8-contact">8 Contact</a>
        </p>
        <div class="block-info" style="display: none;"><span class="line-numbers">2-28</span></div>
      </div>
      <div class="block">
        <div class="comment" lo="29" lf="29">
          <!-- \TOC -->
        </div>
        <div class="block-info" style="display: none;"><span class="line-numbers">29</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="31" lf="31"><a name="About"></a></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">31</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="32" lf="32"><a name="1-about" number="1" lo="32" raw="# 1 About" class="anchor hanchor" href="#1-about"><span class="hnumber">1</span>&nbsp;<span class="htext">About</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">32</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="34" lf="34">The intended user for this server-side software is a data provider that wants to serve data through a <a href="https://github.com/hapi-server/data-specification">HAPI API</a>. To be able to serve data from a HAPI API from their server using this software, the data provider only needs</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">34</span></div>
      </div>
      <div class="block">
        <ol lo="36" lf="37" class="compact">
          <li markerlength="3" padlength="0" lo="36" lf="36">
            <div class="block">
              <p padlength="0" lo="36" lf="36"><a href="https://github.com/hapi-server/data-specification">HAPI</a> metadata, in one of a <a href="#Metadata">variety of forms</a>, for a collection of datasets and</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">36</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="37" lf="39">
            <div class="block">
              <p padlength="0" lo="37" lf="37">a command-line program that returns at least a <a href="https://github.com/hapi-server/data-specification/blob/master/hapi-dev/HAPI-data-access-spec-dev.md#data-stream-content">headerless HAPI CSV stream</a> for all parameters in the dataset over the full time range of available data. Optionally, the command line program can take inputs of a start and stop time, a list of one or more parameters to output, and a HAPI stream format.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">37</span></div>
            </div>
          </li>
        </ol>
        <div class="block-info" style="display: none;"><span class="line-numbers">36-37</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="39" lf="39">This software handles</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">39</span></div>
      </div>
      <div class="block">
        <ol lo="41" lf="45" class="compact">
          <li markerlength="3" padlength="0" lo="41" lf="41">
            <div class="block">
              <p padlength="0" lo="41" lf="41">HAPI metadata validation,</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">41</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="42" lf="42">
            <div class="block">
              <p padlength="0" lo="42" lf="42">request validation and error responses,</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">42</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="43" lf="43">
            <div class="block">
              <p padlength="0" lo="43" lf="43">logging and alerts,</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">43</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="44" lf="44">
            <div class="block">
              <p padlength="0" lo="44" lf="44">time and parameter sub-setting (as needed), and</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">44</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="45" lf="47">
            <div class="block">
              <p padlength="0" lo="45" lf="45">generation of <a href="https://github.com/hapi-server/data-specification/blob/master/hapi-dev/HAPI-data-access-spec-dev.md#data-stream-content">HAPI JSON</a> or <a href="https://github.com/hapi-server/data-specification/blob/master/hapi-dev/HAPI-data-access-spec-dev.md#data-stream-content">HAPI binary</a> (as needed).</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">45</span></div>
            </div>
          </li>
        </ol>
        <div class="block-info" style="display: none;"><span class="line-numbers">41-45</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="47" lf="47">Other features:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">47</span></div>
      </div>
      <div class="block">
        <ol lo="49" lf="51" class="compact">
          <li markerlength="3" padlength="0" lo="49" lf="49">
            <div class="block">
              <p padlength="0" lo="49" lf="49">Backpressure is handled by pausing command-line data generator <code type="md">stdout</code>. The server requires only &nbsp;100 MB of memory.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">49</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="50" lf="50">
            <div class="block">
              <p padlength="0" lo="50" lf="50">Unit tests â€“ tests on the command line program and HAPI URLs can be specified in a configuration file. By default, the server will not start if any test fails.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">50</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="51" lf="53">
            <div class="block">
              <p padlength="0" lo="51" lf="51">Coupling to the the <a href="https://github.com/hapi-server/server-ui"><code type="md">server-ui</code> client</a>.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">51</span></div>
            </div>
          </li>
        </ol>
        <div class="block-info" style="display: none;"><span class="line-numbers">49-51</span></div>
      </div>
      <div class="block">
        <div class="comment" lo="53" lf="53">%A list of catalogs that are served using this software is given at <a href="%5Bhttp://hapi-server.org/servers%5D">http://hapi-server.org/servers</a>.</div>
      </div>
      <div class="block">
        <p padlength="0" lo="55" lf="55"><a name="Installation"></a></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">55</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="56" lf="56" class=""><a name="2-installation" number="2" lo="56" raw="# 2 Installation" class="anchor hanchor" href="#2-installation"><span class="hnumber">2</span>&nbsp;<span class="htext">Installation</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">56</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="58" lf="58">Requires <a href="https://nodejs.org/">NodeJS v16+</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">58</span></div>
      </div>
      <div class="block">
        <pre lo="60" lf="64" class=""><div class="block"><code lo="61" class="">git clone https://github.com/hapi-server/server-nodejs.git &amp;&amp; cd server-nodejs</code></div><div class="block"><code lo="62" class="">npm install; npm update;</code></div><div class="block"><code lo="63" class="">node server.js</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">60-64</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="66" lf="66" class="">This server is tested on Linux and OS-X.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">66</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="68" lf="68" class=""><a name="Examples"></a></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">68</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="69" lf="69"><a name="3-examples" number="3" lo="69" raw="# 3 Examples" class="anchor hanchor" href="#3-examples" lf="69"><span class="hnumber">3</span>&nbsp;<span class="htext">Examples</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">69</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="71" lf="71"><a name="31-list-of-examples" number="3.1" lo="71" raw="## 3.1 List of Examples" class="anchor hanchor" href="#31-list-of-examples" lf="71"><span class="hnumber">3.1</span>&nbsp;<span class="htext">List of Examples</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">71</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="73" lf="73">The following examples are included in the <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/">metadata</a> directory. The examples can be run using</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">73</span></div>
      </div>
      <div class="block">
        <pre lo="75" lf="77">./hapi-server -f metadata/FILENAME.json</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">75-77</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="79" lf="79">where <code type="md">FILENAME.json</code> is one of the file names listed below (e.g., <code type="md">Example0.json</code>).</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">79</span></div>
      </div>
      <div class="block">
        <ul lo="81" lf="97" class="compact">
          <li markerlength="2" padlength="0" lo="81" lf="81">
            <div class="block">
              <p padlength="0" lo="81" lf="81"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example0.json">Example0.json</a> - A Python program dumps an entire dataset in the headerless HAPI CSV format; the server handles time and parameter subsetting and creation of HAPI Binary and JSON.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="82" lf="82">
            <div class="block">
              <p padlength="0" lo="82" lf="82"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example1.json">Example1.json</a> - Same as Example0 except the Python program handles time subsetting.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="83" lf="83">
            <div class="block">
              <p padlength="0" lo="83" lf="83"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example2.json">Example2.json</a> - Same as Example1, except the Python program handles time and parameter subsetting and creation of HAPI CSV and Binary.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="84" lf="84">
            <div class="block">
              <p padlength="0" lo="84" lf="84"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example3.json">Example3.json</a> - Same as Example2 except for HAPI info metadata for each dataset is stored in an external file.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="85" lf="85">
            <div class="block">
              <p padlength="0" lo="85" lf="85"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example4.json">Example4.json</a> - Same as Example3 except for HAPI info metadata for each dataset is generated by a command-line command.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="86" lf="86">
            <div class="block">
              <p padlength="0" lo="86" lf="86"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example5.json">Example5.json</a> - Same as Example4 except catalog metadata is stored in an external file.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="87" lf="87">
            <div class="block">
              <p padlength="0" lo="87" lf="87"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example6.json">Example6.json</a> - Same as Example5 except catalog metadata is generated by a command-line command.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="88" lf="88">
            <div class="block">
              <p padlength="0" lo="88" lf="88"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example7.json">Example7.json</a> - Pass-through example; Same as Example2 except that data is generated by remote request and catalog metadata is returned from a URL.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="89" lf="89">
            <div class="block">
              <p padlength="0" lo="89" lf="89"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example8.json">Example8.json</a> - A dataset in headerless HAPI CSV format is stored in a single file; the server handles parameter and time subsetting and creation of HAPI JSON and Binary.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="90" lf="90">
            <div class="block">
              <p padlength="0" lo="90" lf="90"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example9.json">Example9.json</a> - A URL returns a dataset in headerless HAPI CSV format; the server handles parameter and time subsetting and creation of HAPI JSON and Binary.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="91" lf="91">
            <div class="block">
              <p padlength="0" lo="91" lf="91"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example10.json">Example10.json</a> - Same as Example9 except catalog is returned by a command.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="92" lf="92">
            <div class="block">
              <p padlength="0" lo="92" lf="92"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/demos/AutoplotExample1.json">AutoplotExample1.json</a> - A dataset is stored in multiple files and AutoplotDataServer is used to subset in time.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="93" lf="93">
            <div class="block">
              <p padlength="0" lo="93" lf="93"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/demos/AutoplotExample2.json">AutoplotExample2.json</a> - A dataset is stored in a CDF file, and AutoplotDataserver is used to generate HAPI CSV.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="94" lf="94">
            <div class="block">
              <p padlength="0" lo="94" lf="94"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/TestData2.0.json">TestData2.0.json</a> - A test dataset used to test HAPI clients.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="95" lf="95">
            <div class="block">
              <p padlength="0" lo="95" lf="95"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/TestData2.1.json">TestData2.1.json</a> - A test dataset used to test HAPI clients.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="96" lf="96">
            <div class="block">
              <p padlength="0" lo="96" lf="96"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/SSCWeb.json">SSCWeb.json</a> - Data from a non-HAPI web service is made available from a HAPI server.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97-99</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="97" lf="99">
            <div class="block">
              <p padlength="0" lo="97" lf="97"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/QinDenton">QinDenton.json</a> - Data in a single ASCII file is converted to headerless HAPI CSV by a Python program. See section 2.5.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97</span></div>
            </div>
          </li>
        </ul>
        <div class="block-info" style="display: none;"><span class="line-numbers">81-97</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="99" lf="99"><a name="32-serve-data-from-a-minimal-python-program" number="3.2" lo="99" raw="## 3.2 Serve data from a minimal Python program" class="anchor hanchor" href="#32-serve-data-from-a-minimal-python-program" lf="99"><span class="hnumber">3.2</span>&nbsp;<span class="htext">Serve data from a minimal Python program</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">99</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="101" lf="101">In this example, we assume that the command line program that returns a dataset has the minimal capabilities required - when executed, it generates a headerless HAPI CSV file with all parameters in the dataset over the entire time range of available data. The server handles time and parameter subsetting and the generation of HAPI Binary and JSON.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">101</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="103" lf="103">The Python script <a href="https://github.com/hapi-server/server-nodejs/blob/master/bin/Example.py">Example.py</a> returns HAPI-formatted CSV data (with no header) with two parameters. Only a configuration file, <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example0.json">Example0.json</a>, is needed to serve this data. The configuration file has information that is used to call the command line program, and it also has HAPI metadata that describes the output of <a href="https://raw.githubusercontent.com/hapi-server/server-nodejs/master/bin/Example.py">Example.py</a>. Details about the configuration file format are described in the <a href="#Metadata">Metadata</a> section.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">103</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="105" lf="105">The Python calling syntax of <a href="https://github.com/hapi-server/server-nodejs/blob/master/bin/Example.py">Example.py</a> is </p>
        <div class="block-info" style="display: none;"><span class="line-numbers">105</span></div>
      </div>
      <div class="block">
        <pre lo="107" lf="109">python Example.py</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">107-109</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="111" lf="111">To run this example locally after <a href="#Installation">installation</a>, execute</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">111</span></div>
      </div>
      <div class="block">
        <pre lo="113" lf="115" class="language-bash">./hapi-server --file metadata/Example0.json</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">113-115</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="117" lf="117">and then open <code type="md">http://localhost:8999/Example0/hapi</code>. You should see the same landing page as that at <a href="http://hapi-server.org/servers-dev/Example0/hapi">http://hapi-server.org/servers-dev/Example0/hapi</a>. Note that the <code type="md">--open</code> command-line switch can be used to automatically open the landing page, e.g.,</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">117</span></div>
      </div>
      <div class="block">
        <pre lo="119" lf="121" class="language-bash">./hapi-server --file metadata/Example0.json --open</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">119-121</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="123" lf="123"><a name="33-serve-data-from-an-enhanced-python-program" number="3.3" lo="123" raw="## 3.3 Serve data from an enhanced Python program" class="anchor hanchor" href="#33-serve-data-from-an-enhanced-python-program" lf="123"><span class="hnumber">3.3</span>&nbsp;<span class="htext">Serve data from an enhanced Python program</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">123</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="125" lf="125">The Python script <a href="https://github.com/hapi-server/server-nodejs/blob/master/bin/Example.py">Example.py</a> can subset parameters and time and provide binary output. To force the server to use these capabilities, we need to modify the server configuration metadata in <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example2.json">Example1.json</a>. The changes are replacing</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">125</span></div>
      </div>
      <div class="block">
        <pre lo="127" lf="129" class="language-javascript"><span class="hljs-string">"command"</span>: <span class="hljs-string">"python bin/Example.py"</span></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">127-129</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="131" lf="131">with</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">131</span></div>
      </div>
      <div class="block">
        <pre lo="133" lf="135" class="language-javascript"><span class="hljs-string">"command"</span>: <span class="hljs-string">"python bin/Example.py --params ${parameters} --start ${start} --stop ${stop} --fmt ${format}"</span></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">133-135</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="137" lf="137">and adding</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">137</span></div>
      </div>
      <div class="block">
        <pre lo="139" lf="141" class="language-javascript"><span class="hljs-string">"formats"</span>: [<span class="hljs-string">"csv"</span>, <span class="hljs-string">"binary"</span>]</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">139-141</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="143" lf="143">The modified file is <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example2.json">Example2.json</a>. To run this example locally after <a href="#Installation">installation</a>, execute</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">143</span></div>
      </div>
      <div class="block">
        <pre lo="145" lf="147" class="language-bash">./hapi-server --file metadata/Example2.json</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">145-147</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="149" lf="149">and then open <code type="md">http://localhost:8999/Example2/hapi</code>. The command-line program now produces binary output and performs parameter subsetting as needed and the response time for data should decrease.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">149</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="151" lf="151">The server responses will be identical to those in the previous example. You should see the same landing page at <a href="http://hapi-server.org/servers-dev/Example2/hapi">http://hapi-server.org/servers-dev/Example2/hapi</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">151</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="153" lf="153"><a name="34-serve-data-from-a-non-hapi-web-service" number="3.4" lo="153" raw="## 3.4 Serve data from a non-HAPI web service" class="anchor hanchor" href="#34-serve-data-from-a-non-hapi-web-service" lf="153"><span class="hnumber">3.4</span>&nbsp;<span class="htext">Serve data from a non-HAPI web service</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">153</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="155" lf="155">A non-HAPI server can be quickly made HAPI compliant using this server as a pass-through. Data from <a href="https://sscweb.sci.gsfc.nasa.gov/">SSCWeb</a>, which is available from a <a href="https://sscweb.sci.gsfc.nasa.gov/WebServices/REST/">REST API</a>, has been made available through a HAPI API at <a href="http://hapi-server.org/servers/SSCWeb/hapi">http://hapi-server.org/servers/SSCWeb/hapi</a>. The configuration file is <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/SSCWeb.json">SSCWeb.json</a> and the command line program is <a href="https://github.com/hapi-server/server-nodejs/blob/master/bin/SSCWeb.js">SSCWeb.js</a>. Note that the metadata file <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/SSCWeb.json">SSCWeb.json</a> was created using code in <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/SSCWeb">metadata/SSCWeb</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">155</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="157" lf="157">To run this example locally after <a href="#Installation">installation</a>, execute</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">157</span></div>
      </div>
      <div class="block">
        <pre lo="159" lf="161" class="language-bash">./hapi-server --file metadata/SSCWeb.json --open</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">159-161</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="163" lf="163">You should see the same landing page at <a href="http://hapi-server.org/servers/SSCWeb/hapi">http://hapi-server.org/servers/SSCWeb/hapi</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">163</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="165" lf="165" class=""><a name="35-serve-data-stored-in-a-single-file" number="3.5" lo="165" raw="## 3.5 Serve data stored in a single file" class="anchor hanchor" href="#35-serve-data-stored-in-a-single-file" lf="165"><span class="hnumber">3.5</span>&nbsp;<span class="htext">Serve data stored in a single file</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">165</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="167" lf="167">The <a href="http://virbo.org/QinDenton">Qin-Denton</a> dataset contains multiple parameters stored in a single large file.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">167</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="169" lf="169">The command-line program that produces HAPI CSV from this file is <a href="https://github.com/hapi-server/server-nodejs/blob/master/bin/QinDenton.py">QinDenton.py</a> and the metadata is in <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/QinDenton.json">QinDenton.json</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">169</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="171" lf="171">To run this example, use</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">171</span></div>
      </div>
      <div class="block">
        <pre lo="173" lf="175" class="language-bash">./hapi-server --file metadata/QinDenton.json</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">173-175</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="177" lf="177"><a name="36-serve-data-read-by-autoplot" number="3.6" lo="177" raw="## 3.6 Serve data read by Autoplot" class="anchor hanchor" href="#36-serve-data-read-by-autoplot" lf="177"><span class="hnumber">3.6</span>&nbsp;<span class="htext">Serve data read by Autoplot</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">177</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="179" lf="179">Nearly data file that can be read by <a href="http://autoplot.org/">Autoplot</a> can be served using this server. </p>
        <div class="block-info" style="display: none;"><span class="line-numbers">179</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="181" lf="181">Serving data requires at most two steps:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">181</span></div>
      </div>
      <div class="block">
        <ol lo="183" lf="184" class="compact">
          <li markerlength="3" padlength="0" lo="183" lf="183">
            <div class="block">
              <p padlength="0" lo="183" lf="183">Generating an Autoplot URI for each parameter, and (in some cases)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">184-186</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="184" lf="186">
            <div class="block">
              <p padlength="0" lo="184" lf="184">Writing (by hand) metadata for each parameter.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">184</span></div>
            </div>
          </li>
        </ol>
        <div class="block-info" style="display: none;"><span class="line-numbers">183-184</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="186" lf="186"><strong type="md">Example 1</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">186</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="188" lf="188">The first example serves data stored in a single CDF file. The configuration file is <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/AutoplotExample1.json">AutoplotExample1.json</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">188</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="190" lf="190">In this example, step 2. above (writing metadata by hand) is not required because the data file has metadata in a format that Autoplot can translate to HAPI metadata.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">190</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="192" lf="192">To run this example locally, execute</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">192</span></div>
      </div>
      <div class="block">
        <pre lo="194" lf="196" class="language-bash">./hapi-server --file metadata/AutoplotExample1.json</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">194-196</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="198" lf="198"><strong type="md">Example 2</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">198</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="200" lf="200">The second example serves data stored in multiple ASCII files. The configuration file is <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/AutoplotExample2.json">AutoplotExample2.json</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">200</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="202" lf="202">To run this example locally, execute</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">202</span></div>
      </div>
      <div class="block">
        <pre lo="204" lf="206" class="language-bash">./hapi-server --file metadata/AutoplotExample2.json</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">204-206</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="208" lf="208"><a name="Usage"></a></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">208</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="209" lf="209"><a name="4-usage" number="4" lo="209" raw="# 4 Usage" class="anchor hanchor" href="#4-usage" lf="209"><span class="hnumber">4</span>&nbsp;<span class="htext">Usage</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">209</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="211" lf="211">List command-line options:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">211</span></div>
      </div>
      <div class="block">
        <pre lo="213" lf="279"><div class="block"><code lo="214" lf="214">./hapi-server -h</code><div class="line-number">1</div></div><div class="block"><code lo="215" lf="215"></code><div class="line-number">2</div></div><div class="block"><code lo="216" lf="216">Usage: node server.js [options]</code><div class="line-number">3</div></div><div class="block"><code lo="217" lf="217"></code><div class="line-number">4</div></div><div class="block"><code lo="218" lf="218">Options:</code><div class="line-number">5</div></div><div class="block"><code lo="219" lf="219">  --help               Show help                                       [boolean]</code><div class="line-number">6</div></div><div class="block"><code lo="220" lf="220"></code><div class="line-number">7</div></div><div class="block"><code lo="221" lf="221">  --file, -f           Catalog configuration file or file pattern</code><div class="line-number">8</div></div><div class="block"><code lo="222" lf="222">                                 [string] [default: /metadata/TestData2.0.json"]</code><div class="line-number">9</div></div><div class="block"><code lo="223" lf="223"></code><div class="line-number">10</div></div><div class="block"><code lo="224" lf="224">  --port, -p           Server port                      [number] [default: 8999]</code><div class="line-number">11</div></div><div class="block"><code lo="225" lf="225"></code><div class="line-number">12</div></div><div class="block"><code lo="226" lf="226">  --conf, -c           Server configuration file</code><div class="line-number">13</div></div><div class="block"><code lo="227" lf="227">                                          [string] [default: "conf/server.json"]</code><div class="line-number">14</div></div><div class="block"><code lo="228" lf="228"></code><div class="line-number">15</div></div><div class="block"><code lo="229" lf="229">  --ignore, -i         Start server even if metadata validation errors [boolean]</code><div class="line-number">16</div></div><div class="block"><code lo="230" lf="230"></code><div class="line-number">17</div></div><div class="block"><code lo="231" lf="231">  --skipchecks, -s     Skip startup metadata validation and command line tests</code><div class="line-number">18</div></div><div class="block"><code lo="232" lf="232">                                                      [boolean] [default: false]</code><div class="line-number">19</div></div><div class="block"><code lo="233" lf="233"></code><div class="line-number">20</div></div><div class="block"><code lo="234" lf="234">  --logdir, -l         Log directory                   [string] [default: "log"]</code><div class="line-number">21</div></div><div class="block"><code lo="235" lf="235"></code><div class="line-number">22</div></div><div class="block"><code lo="236" lf="236">  --open, -o           Open web page on start         [boolean] [default: false]</code><div class="line-number">23</div></div><div class="block"><code lo="237" lf="237"></code><div class="line-number">24</div></div><div class="block"><code lo="238" lf="238">  --test, -t           Run URL tests and exit         [boolean] [default: false]</code><div class="line-number">25</div></div><div class="block"><code lo="239" lf="239"></code><div class="line-number">26</div></div><div class="block"><code lo="240" lf="240">  --verify             Run verification tests on command line and exit</code><div class="line-number">27</div></div><div class="block"><code lo="241" lf="241">                                                      [boolean] [default: false]</code><div class="line-number">28</div></div><div class="block"><code lo="242" lf="242"></code><div class="line-number">29</div></div><div class="block"><code lo="243" lf="243">  --loglevel           info or debug                  [string] [default: "info"]</code><div class="line-number">30</div></div><div class="block"><code lo="244" lf="244"></code><div class="line-number">31</div></div><div class="block"><code lo="245" lf="245">  --debug              set loglevel to 'debug'        [boolean] [default: false]</code><div class="line-number">32</div></div><div class="block"><code lo="246" lf="246"></code><div class="line-number">33</div></div><div class="block"><code lo="247" lf="247">  --server-ui-include  Also include these servers in server-ui server drop-down.</code><div class="line-number">34</div></div><div class="block"><code lo="248" lf="248">                       Use multiple times for more than one list.</code><div class="line-number">35</div></div><div class="block"><code lo="249" lf="249">                                                        [string] [default: null]</code><div class="line-number">36</div></div><div class="block"><code lo="250" lf="250"></code><div class="line-number">37</div></div><div class="block"><code lo="251" lf="251">  --proxy-whitelist    Allow proxying of servers in this file (so one can use</code><div class="line-number">38</div></div><div class="block"><code lo="252" lf="252">                       server=http://... in address bar of server-ui).</code><div class="line-number">39</div></div><div class="block"><code lo="253" lf="253">                                                          [string] [default: ""]</code><div class="line-number">40</div></div><div class="block"><code lo="254" lf="254"></code><div class="line-number">41</div></div><div class="block"><code lo="255" lf="255">  --verifier           Verifier server URL on landing page (__VERIFIER__ in html</code><div class="line-number">42</div></div><div class="block"><code lo="256" lf="256">                       is replaced with this value)</code><div class="line-number">43</div></div><div class="block"><code lo="257" lf="257">                            [string] [default: "http://hapi-server.org/verify/"]</code><div class="line-number">44</div></div><div class="block"><code lo="258" lf="258"></code><div class="line-number">45</div></div><div class="block"><code lo="259" lf="259">  --plotserver         Plot server URL on landing page (__PLOTSERVER__ in html</code><div class="line-number">46</div></div><div class="block"><code lo="260" lf="260">                       is replaced with this value)</code><div class="line-number">47</div></div><div class="block"><code lo="261" lf="261">                              [string] [default: "http://hapi-server.org/plot/"]</code><div class="line-number">48</div></div><div class="block"><code lo="262" lf="262"></code><div class="line-number">49</div></div><div class="block"><code lo="263" lf="263">  --hapiserverpath     Absolute path to use for $HAPISERVERPATH in server</code><div class="line-number">50</div></div><div class="block"><code lo="264" lf="264">                       metadata files                    [string] [default: "."]</code><div class="line-number">51</div></div><div class="block"><code lo="265" lf="265"></code><div class="line-number">52</div></div><div class="block"><code lo="266" lf="266">  --nodejs             Location of NodeJS binary to use for $NODEJSEXE in server</code><div class="line-number">53</div></div><div class="block"><code lo="267" lf="267">                       metadata files (if needed for command line calls).</code><div class="line-number">54</div></div><div class="block"><code lo="268" lf="268">                                                       [string] [default: "node"]</code><div class="line-number">55</div></div><div class="block"><code lo="269" lf="269"></code><div class="line-number">56</div></div><div class="block"><code lo="270" lf="270">  --python             Location of Python binary to use for $PYTHONEXE in server</code><div class="line-number">57</div></div><div class="block"><code lo="271" lf="271">                       metadata files (if needed for command line calls).</code><div class="line-number">58</div></div><div class="block"><code lo="272" lf="272">                                                                        [string]</code><div class="line-number">59</div></div><div class="block"><code lo="273" lf="273"></code><div class="line-number">60</div></div><div class="block"><code lo="274" lf="274">  --https              Start https server                              [boolean]</code><div class="line-number">61</div></div><div class="block"><code lo="275" lf="275"></code><div class="line-number">62</div></div><div class="block"><code lo="276" lf="276">  --cert               https certificate file path                      [string]</code><div class="line-number">63</div></div><div class="block"><code lo="277" lf="277"></code><div class="line-number">64</div></div><div class="block"><code lo="278" lf="278">  --key                https key file path                              [string]</code><div class="line-number">65</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">213-279</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="281" lf="281">Basic usage:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">281</span></div>
      </div>
      <div class="block">
        <pre lo="283" lf="285">./hapi-server --file metadata/TestData.json</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">283-285</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="287" lf="287">Starts HAPI server at <a href="http://localhost:8999/hapi"><code type="md">http://localhost:8999/TestData/hapi</code></a> and serves datasets specified in the catalog <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/TestData.json">./metadata/TestData.json</a>. </p>
        <div class="block-info" style="display: none;"><span class="line-numbers">287</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="289" lf="289">Multiple catalogs can be served by providing multiple catalog files on the command line:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">289</span></div>
      </div>
      <div class="block">
        <pre lo="291" lf="293" class="language-bash">./hapi-server --file CATALOG1.json --file CATALOG2.json</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">291-293</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="295" lf="295">For example</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">295</span></div>
      </div>
      <div class="block">
        <pre lo="297" lf="299" class="language-bash">./hapi-server --file metadata/TestData2.0.json --file metadata/Example1.json</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">297-299</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="300" lf="300">will serve the two datasets at</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">300</span></div>
      </div>
      <div class="block">
        <pre lo="302" lf="305"><div class="block"><code lo="303" lf="303">http://localhost:8999/TestData2.0/hapi</code></div><div class="block"><code lo="304" lf="304">http://localhost:8999/Example1/hapi</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">302-305</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="307" lf="307">And the page at <code type="md">http://localhost:8999/</code> will point to these two URLs.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">307</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="309" lf="309"><a name="Server_Configuration"></a></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">309</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="310" lf="310"><a name="5-server-configuration" number="5" lo="310" raw="# 5 Server Configuration" class="anchor hanchor" href="#5-server-configuration" lf="310"><span class="hnumber">5</span>&nbsp;<span class="htext">Server Configuration</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">310</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="312" lf="312"><a name="51-conf-config.json" number="5.1" lo="312" raw="## 5.1 conf/config.json" class="anchor hanchor" href="#51-conf-config.json" lf="312"><span class="hnumber">5.1</span>&nbsp;<span class="htext">conf/config.json</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">312</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="314" lf="314">The variables <code type="md">$HAPISERVERPATH</code>, <code type="md">$PYTHONEXE</code>, and <code type="md">$NODEJSEXE</code> can be used in commands, files, and URLs in the server metadata (which are files passed using the command-line <code type="md">--file</code> switch). See <a href="https://github.com/hapi-server/server-nodejs/tree/master/metadata">the examples</a> for use cases.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">314</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="316" lf="316">These variables can be passed as command-line arguments or set in the default configuration file <code type="md">conf/server.json</code>; an alternative location can be set using a command-line argument, e.g.,</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">316</span></div>
      </div>
      <div class="block">
        <pre lo="318" lf="320">./hapiserver -c /tmp/config.json</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">318-320</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="322" lf="322">Variables set on the command line take precedence over those set in <code type="md">conf/server.json</code>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">322</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="324" lf="324"><strong type="md"><code type="md">$HAPISERVERPATH</code></strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">324</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="326" lf="326"><code type="md">$HAPISERVERPATH</code> can be used in metadata files to reference the absolute path of a directory. For example,</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">326</span></div>
      </div>
      <div class="block">
        <pre lo="328" lf="334" class="language-javascript"><div class="block"><code lo="329" lf="329">{</code><div class="line-number">1</div></div><div class="block"><code lo="330" lf="330">  <span class="hljs-string">"server"</span>: {...},</code><div class="line-number">2</div></div><div class="block"><code lo="331" lf="331">  <span class="hljs-string">"data"</span>: {...},</code><div class="line-number">3</div></div><div class="block"><code lo="332" lf="332">  <span class="hljs-string">"catalog_file"</span>: <span class="hljs-string">"$HAPISERVERPATH/mymetadata/Data.json"</span></code><div class="line-number">4</div></div><div class="block"><code lo="333" lf="333">}</code><div class="line-number">5</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">328-334</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="336" lf="336">By default, <code type="md">$HAPISERVERPATH</code> is the installation directory (the directory containing the shell launch script <code type="md">hapi-server</code>). To use a custom path, set <code type="md">hapiserverpath</code> on the command line or in <code type="md">conf/server.json</code>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">336</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="338" lf="338">All relative paths in commands in metadata files are relative to the directory where <code type="md">hapi-server</code> was executed.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">338</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="340" lf="340"><strong type="md"><code type="md">$PYTHONEXE</code></strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">340</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="342" lf="342">This is the command used to start Python. By default, it is <code type="md">python</code>. If <code type="md">python</code> is not in the path, this can be set using a relative or absolute path. Python is used by several of the demonstration catalogs.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">342</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="344" lf="344">This variable can also be set using the <code type="md">--python</code> command line switch, which has the highest precedence.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">344</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="346" lf="346">Example:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">346</span></div>
      </div>
      <div class="block">
        <pre lo="348" lf="352" class="language-javascript"><div class="block"><code lo="349" lf="349">data: {</code></div><div class="block"><code lo="350" lf="350">  <span class="hljs-string">"command"</span>: <span class="hljs-string">"$PYTHONEXE $HAPISERVERPATH/mybin/Data.py"</span></code></div><div class="block"><code lo="351" lf="351">}</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">348-352</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="354" lf="354"><strong type="md"><code type="md">$NODEJSEXE</code></strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">354</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="356" lf="356">This variable can also be set using the <code type="md">--nodejs</code> command line switch, which has the highest precedence.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">356</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="358" lf="358">This is the command used to call NodeJS. By default, it is the command used to start the server. The start-up script looks for a NodeJS executable in <code type="md">$HAPISERVERPATH/bin</code> and then tries <code type="md">node</code> and then <code type="md">nodejs</code>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">358</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="360" lf="360"><a name="52-apache" number="5.2" lo="360" raw="## 5.2 Apache" class="anchor hanchor" href="#52-apache" lf="360"><span class="hnumber">5.2</span>&nbsp;<span class="htext">Apache</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">360</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="362" lf="362">To expose a URL through Apache, (1) enable <code type="md">mod_proxy</code> and <code type="md">mod_proxy_http</code> and (2) add the following in a <code type="md">&lt;VirtualHost&gt;</code> node in a <a href="https://httpd.apache.org/docs/2.4/vhosts/examples.html">Apache Virtual Hosts</a> file</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">362</span></div>
      </div>
      <div class="block">
        <pre lo="364" lf="369"><div class="block"><code lo="365" lf="365">&lt;VirtualHost *:80&gt;</code></div><div class="block"><code lo="366" lf="366">ProxyPass /TestData2.0 http://localhost:8999/TestData2.0 retry=1</code></div><div class="block"><code lo="367" lf="367">ProxyPassReverse /TestData2.0 http://localhost:8999/TestData2.0</code></div><div class="block"><code lo="368" lf="368">&lt;/VirtualHost&gt;</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">364-369</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="371" lf="371">If serving multiple catalogs (<code type="md">--file</code> used more than once on the command line), use</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">371</span></div>
      </div>
      <div class="block">
        <pre lo="373" lf="378"><div class="block"><code lo="374" lf="374">&lt;VirtualHost *:80&gt;</code></div><div class="block"><code lo="375" lf="375">ProxyPass /servers http://localhost:8999/servers retry=1</code></div><div class="block"><code lo="376" lf="376">ProxyPassReverse /servers http://localhost:8999/servers</code></div><div class="block"><code lo="377" lf="377">&lt;/VirtualHost&gt;</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">373-378</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="380" lf="380"><a name="53-nginx" number="5.3" lo="380" raw="## 5.3 Nginx" class="anchor hanchor" href="#53-nginx" lf="380"><span class="hnumber">5.3</span>&nbsp;<span class="htext">Nginx</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">380</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="382" lf="382">For Nginx, add the following to <code type="md">nginx.conf</code></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">382</span></div>
      </div>
      <div class="block">
        <pre lo="384" lf="386">location /TestData2.0 { proxy_pass http://localhost:8999/TestData2.0;}</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">384-386</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="388" lf="388">If serving multiple catalogs, use</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">388</span></div>
      </div>
      <div class="block">
        <pre lo="390" lf="392">location /servers {proxy_pass http://localhost:8999/servers;}</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">390-392</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="394" lf="394"><a name="Metadata"></a></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">394</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="395" lf="395" class=""><a name="6-metadata" number="6" lo="395" raw="# 6 Metadata" class="anchor hanchor" href="#6-metadata" lf="395"><span class="hnumber">6</span>&nbsp;<span class="htext">Metadata</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">395</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="397" lf="397">The metadata required for this server is similar to a HAPI serverâ€™s <code type="md">/catalog</code> and <code type="md">/info</code> response. </p>
        <div class="block-info" style="display: none;"><span class="line-numbers">397</span></div>
      </div>
      <div class="block">
        <ul lo="399" lf="400" class="compact">
          <li markerlength="2" padlength="0" lo="399" lf="399">
            <div class="block">
              <p padlength="0" lo="399" lf="399">Example HAPI <a href="http://hapi-server.org/servers/TestData2.1/hapi/catalog"><code type="md">/catalog</code></a> response</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">400-402</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="400" lf="402">
            <div class="block">
              <p padlength="0" lo="400" lf="400">Example HAPI <a href="http://http://hapi-server.org/servers/TestData2.1/hapi/info?id=dataset1"><code type="md">/info</code></a> response</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">400</span></div>
            </div>
          </li>
        </ul>
        <div class="block-info" style="display: none;"><span class="line-numbers">399-400</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="402" lf="402">The server requires that the <code type="md">/catalog</code> response is combined with the <code type="md">/info</code> response for all datasets in the catalog in a single JSON catalog configuration file. Additional information about how to generate data must also be included in this JSON file.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">402</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="404" lf="404">The top-level structure of the configuration file is</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">404</span></div>
      </div>
      <div class="block">
        <pre lo="406" lf="466" class="language-javascript"><div class="block"><code lo="407" class="">{</code><div class="line-number">1</div></div><div class="block"><code lo="408" class="">  <span class="hljs-string">"server"</span>: <span class="hljs-comment">// See section 6.1</span></code><div class="line-number">2</div></div><div class="block"><code lo="409" class="">  {</code><div class="line-number">3</div></div><div class="block"><code lo="410" class="">    <span class="hljs-string">"id"</span>: <span class="hljs-string">""</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="411" class="">    <span class="hljs-string">"prefix"</span>: <span class="hljs-string">""</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="412" class="">    <span class="hljs-string">"HAPI"</span>: <span class="hljs-string">""</span>,</code><div class="line-number">6</div></div><div class="block"><code lo="413" class="">    <span class="hljs-string">"contact"</span>: <span class="hljs-string">""</span>,</code><div class="line-number">7</div></div><div class="block"><code lo="414" class="">    <span class="hljs-string">"landingFile"</span>: <span class="hljs-string">""</span>,</code><div class="line-number">8</div></div><div class="block"><code lo="415" class="">    <span class="hljs-string">"landingPath"</span>: <span class="hljs-string">""</span>,</code><div class="line-number">9</div></div><div class="block"><code lo="416" class="">    <span class="hljs-string">"verify"</span>: <span class="hljs-string">""</span>,</code><div class="line-number">10</div></div><div class="block"><code lo="417" class="">    <span class="hljs-string">"catalog-update"</span>: <span class="hljs-literal">null</span></code><div class="line-number">11</div></div><div class="block"><code lo="418" class="">  },</code><div class="line-number">12</div></div><div class="block"><code lo="419" class="">  <span class="hljs-string">"catalog"</span>: &lt;object&gt;,</code><div class="line-number">13</div></div><div class="block"><code lo="420" class="">  or</code><div class="line-number">14</div></div><div class="block"><code lo="421" class="">  <span class="hljs-string">"catalog_inline"</span>: &lt;object&gt;,</code><div class="line-number">15</div></div><div class="block"><code lo="422" class="">  or</code><div class="line-number">16</div></div><div class="block"><code lo="423" class="">  <span class="hljs-string">"catalog_file"</span>: &lt;string&gt;,</code><div class="line-number">17</div></div><div class="block"><code lo="424" class="">  or</code><div class="line-number">18</div></div><div class="block"><code lo="425" class="">  <span class="hljs-string">"catalog_url"</span>: &lt;string&gt;,</code><div class="line-number">19</div></div><div class="block"><code lo="426" class="">  or</code><div class="line-number">20</div></div><div class="block"><code lo="427" class="">  <span class="hljs-string">"catalog_command"</span>: &lt;string&gt;,</code><div class="line-number">21</div></div><div class="block"><code lo="428" class=""></code><div class="line-number">22</div></div><div class="block"><code lo="429" class="">  <span class="hljs-string">"data"</span>:</code><div class="line-number">23</div></div><div class="block"><code lo="430" class="">  {</code><div class="line-number">24</div></div><div class="block"><code lo="431" class="">     <span class="hljs-string">"command"</span>: <span class="hljs-string">"Command line template"</span>, <span class="hljs-comment">// See metadata/Example{1-7}.json</span></code><div class="line-number">25</div></div><div class="block"><code lo="432" class="">     or <span class="hljs-comment">// See metadata/Example8.json</span></code><div class="line-number">26</div></div><div class="block"><code lo="433" class="">     <span class="hljs-string">"file"</span>: <span class="hljs-string">"HAPI CSV file"</span></code><div class="line-number">27</div></div><div class="block"><code lo="434" class="">     <span class="hljs-string">"fileformat"</span>: <span class="hljs-string">"one of 'csv', 'binary', 'json'"</span></code><div class="line-number">28</div></div><div class="block"><code lo="435" class="">     or <span class="hljs-comment">// See metadata/Example9.json</span></code><div class="line-number">29</div></div><div class="block"><code lo="436" class="">     <span class="hljs-string">"url"</span>: <span class="hljs-string">"URL that returns HAPI data"</span> <span class="hljs-comment">// and</span></code><div class="line-number">30</div></div><div class="block"><code lo="437" class="">     <span class="hljs-string">"urlformat"</span>: <span class="hljs-string">"one of 'csv', 'binary', 'json'"</span></code><div class="line-number">31</div></div><div class="block"><code lo="438" class=""></code><div class="line-number">32</div></div><div class="block"><code lo="439" class="">     <span class="hljs-comment">//  __DATACONTACT__ in landingFile is replaced with this value.",</span></code><div class="line-number">33</div></div><div class="block"><code lo="440" class="">     <span class="hljs-string">"contact"</span>: <span class="hljs-string">"Email address if error in command line program."</span></code><div class="line-number">34</div></div><div class="block"><code lo="441" class=""></code><div class="line-number">35</div></div><div class="block"><code lo="442" class="">     <span class="hljs-comment">// Number of milliseconds to wait for a response from command line program</span></code><div class="line-number">36</div></div><div class="block"><code lo="443" class="">     <span class="hljs-comment">// before sending 1501. See bin/Example.py for example of sending a custom</span></code><div class="line-number">37</div></div><div class="block"><code lo="444" class="">     <span class="hljs-comment">// error message.</span></code><div class="line-number">38</div></div><div class="block"><code lo="445" class="">     <span class="hljs-string">"timeout"</span>: <span class="hljs-number">59000</span>, </code><div class="line-number">39</div></div><div class="block"><code lo="446" class="">     <span class="hljs-string">"testcommands"</span>: [</code><div class="line-number">40</div></div><div class="block"><code lo="447" class="">       {</code><div class="line-number">41</div></div><div class="block"><code lo="448" class="">        <span class="hljs-string">"command"</span>: &lt;string&gt;, </code><div class="line-number">42</div></div><div class="block"><code lo="449" class="">        <span class="hljs-string">"Nlines"</span>: &lt;integer&gt;,</code><div class="line-number">43</div></div><div class="block"><code lo="450" class="">        <span class="hljs-string">"Nbytes"</span>: &lt;integer&gt;,</code><div class="line-number">44</div></div><div class="block"><code lo="451" class="">        <span class="hljs-string">"Ncommas"</span>: &lt;integer&gt;</code><div class="line-number">45</div></div><div class="block"><code lo="452" class="">        },</code><div class="line-number">46</div></div><div class="block"><code lo="453" class="">        ...</code><div class="line-number">47</div></div><div class="block"><code lo="454" class="">      ],</code><div class="line-number">48</div></div><div class="block"><code lo="455" class="">      <span class="hljs-string">"testurls"</span>: [</code><div class="line-number">49</div></div><div class="block"><code lo="456" class="">        {</code><div class="line-number">50</div></div><div class="block"><code lo="457" class="">          <span class="hljs-string">"url"</span>: &lt;string&gt;,</code><div class="line-number">51</div></div><div class="block"><code lo="458" class="">          <span class="hljs-string">"Nlines"</span>: &lt;integer&gt;,</code><div class="line-number">52</div></div><div class="block"><code lo="459" class="">          <span class="hljs-string">"Nbytes"</span>: &lt;integer&gt;,</code><div class="line-number">53</div></div><div class="block"><code lo="460" class="">          <span class="hljs-string">"Ncommas"</span>: &lt;integer&gt;</code><div class="line-number">54</div></div><div class="block"><code lo="461" class="">        },</code><div class="line-number">55</div></div><div class="block"><code lo="462" class="">        ...</code><div class="line-number">56</div></div><div class="block"><code lo="463" class="">      ]</code><div class="line-number">57</div></div><div class="block"><code lo="464" class="">    }</code><div class="line-number">58</div></div><div class="block"><code lo="465" class="">}</code><div class="line-number">59</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">406-466</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="468" lf="468">A variety of examples are listed in the <a href="#Examples">Examples</a> section.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">468</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="470" lf="470">The string <code type="md">command</code> in the data node is a command that produces a headerless HAPI data response that has optional placeholders. See <a href="https://github.com/hapi-server/server-nodejs/tree/master/metadata">metadata/Example{1-7}.json</a> for examples of usage that includes calling <a href="https://github.com/hapi-server/server-nodejs/tree/master/bin/Example.py">bin/Example.py</a>. For example, in <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example4.json">metadata/Example4.json</a>, <code type="md">command</code> is</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">470</span></div>
      </div>
      <div class="block">
        <pre lo="472" lf="474" class="language-bash">python ./bin/Example.py --dataset <span class="hljs-variable">${id}</span> --params <span class="hljs-variable">${parameters}</span> --start <span class="hljs-variable">${start}</span> --stop <span class="hljs-variable">${stop}</span> --fmt <span class="hljs-variable">${format}</span><span class="hljs-string">"</span></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">472-474</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="476" lf="476" class=""><a name="61-server" number="6.1" lo="476" raw="## 6.1 server" class="anchor hanchor" href="#61-server" lf="476"><span class="hnumber">6.1</span>&nbsp;<span class="htext">server</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">476</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="478" lf="478">The server node has the form</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">478</span></div>
      </div>
      <div class="block">
        <pre lo="480" lf="504" class="language-javascript"><div class="block"><code lo="481" class=""><span class="hljs-string">"server"</span>: {</code><div class="line-number">1</div></div><div class="block"><code lo="482" class="">  <span class="hljs-comment">// Default is file name without extension.</span></code><div class="line-number">2</div></div><div class="block"><code lo="483" class="">  <span class="hljs-string">"id"</span>: <span class="hljs-string">""</span>,</code><div class="line-number">3</div></div><div class="block"><code lo="484" class=""></code><div class="line-number">4</div></div><div class="block"><code lo="485" class="">  <span class="hljs-comment">// Default is id.</span></code><div class="line-number">5</div></div><div class="block"><code lo="486" class="">  <span class="hljs-string">"prefix"</span>: <span class="hljs-string">""</span>,</code><div class="line-number">6</div></div><div class="block"><code lo="487" class=""></code><div class="line-number">7</div></div><div class="block"><code lo="488" class="">  <span class="hljs-comment">// Required. __SERVERCONTACT__ in landingFile is replaced with this value.</span></code><div class="line-number">8</div></div><div class="block"><code lo="489" class="">  <span class="hljs-string">"contact"</span>: <span class="hljs-string">""</span>,</code><div class="line-number">9</div></div><div class="block"><code lo="490" class=""></code><div class="line-number">10</div></div><div class="block"><code lo="491" class="">  <span class="hljs-comment">// HAPI API and schema (e.g., 2.1, 3.0) to use for checking metadata.</span></code><div class="line-number">11</div></div><div class="block"><code lo="492" class="">  <span class="hljs-comment">// __VERSION__ in landingFile is replaced with this value.</span></code><div class="line-number">12</div></div><div class="block"><code lo="493" class="">  <span class="hljs-string">"HAPI"</span>: <span class="hljs-string">""</span>,</code><div class="line-number">13</div></div><div class="block"><code lo="494" class=""></code><div class="line-number">14</div></div><div class="block"><code lo="495" class="">  <span class="hljs-string">"landingFile"</span>: <span class="hljs-string">""</span>,   <span class="hljs-comment">// e.g., index.htm file</span></code><div class="line-number">15</div></div><div class="block"><code lo="496" class="">  <span class="hljs-string">"landingPath"</span>: <span class="hljs-string">""</span>,   <span class="hljs-comment">// relative paths in index.htm will resolve to this path</span></code><div class="line-number">16</div></div><div class="block"><code lo="497" class=""></code><div class="line-number">17</div></div><div class="block"><code lo="498" class="">  <span class="hljs-comment">// Only verify DATASET_NAME when --verify is passed on command line</span></code><div class="line-number">18</div></div><div class="block"><code lo="499" class="">  <span class="hljs-string">"verify"</span>: <span class="hljs-string">"DATASET_NAME"</span>,</code><div class="line-number">19</div></div><div class="block"><code lo="500" class=""></code><div class="line-number">20</div></div><div class="block"><code lo="501" class="">  <span class="hljs-comment">// How often in seconds to re-read metadata in the catalog node</span></code><div class="line-number">21</div></div><div class="block"><code lo="502" class="">  <span class="hljs-string">"catalog-update"</span>: <span class="hljs-literal">null</span> </code><div class="line-number">22</div></div><div class="block"><code lo="503" class="">}</code><div class="line-number">23</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">480-504</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="506" lf="506" class=""><a name="611-id-and-prefix" number="6.1.1" lo="506" raw="### 6.1.1 `id` and `prefix`" class="anchor hanchor" href="#611-id-and-prefix" lf="506"><span class="hnumber">6.1.1</span>&nbsp;<span class="htext"><code type="md">id</code> and <code type="md">prefix</code></span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">506</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="508" lf="508">The <code type="md">id</code> is by default the name of the server configuration file, e.g.,</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">508</span></div>
      </div>
      <div class="block">
        <pre lo="510" lf="512">./hapi-server --file metadata/TestData2.0.json</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">510-512</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="514" lf="514">then <code type="md">id=TestData2.0</code> and <code type="md">prefix=TestData2.0</code>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">514</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="516" lf="516">By default, this catalog would be served from</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">516</span></div>
      </div>
      <div class="block">
        <pre lo="518" lf="520" class="">http://localhost:8999/TestData2.0/hapi</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">518-520</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="522" lf="522"><code type="md">TestData2.0</code> in the URL can be changed to <code type="md">TestData2.0.1</code> by using <code type="md">prefix=TestData2.0.1</code>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">522</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="524" lf="524"><a name="612-contact" number="6.1.2" lo="524" raw="### 6.1.2 `contact`" class="anchor hanchor" href="#612-contact" lf="524"><span class="hnumber">6.1.2</span>&nbsp;<span class="htext"><code type="md">contact</code></span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">524</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="526" lf="526">It should be, at minimum, the email address of a system administrator.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">526</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="528" lf="528" class="highlighted"><a name="613-landingfile-and-landingpath" number="6.1.3" lo="528" raw="### 6.1.3 `landingFile` and `landingPath`" class="anchor hanchor" href="#613-landingfile-and-landingpath" lf="528"><span class="hnumber">6.1.3</span>&nbsp;<span class="htext"><code type="md">landingFile</code> and <code type="md">landingPath</code></span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">528</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="530" lf="530"><code type="md">landingFile</code> is the file to serve in response to requests for</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">530</span></div>
      </div>
      <div class="block">
        <pre lo="532" lf="534">http://localhost:8999/TestData2.0/hapi</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">532-534</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="536" lf="536">By default, the landing page served is the stand-alone file <a href="https://github.com/hapi-server/server-ui/blob/master/single.htm">single.htm</a> from the HAPI server UI codebase. The double underscore variables in this file are replaced using the information in the metadata file (e.g., <code type="md">__CONTACT__</code> is replaced with the <code type="md">server.contact</code> value. A different landing page can be served by setting the <code type="md">landingFile</code> configuration variable, e.g. <code type="md">"landingFile": "$HAPISERVERPATH/public/index.htm"</code>, where <code type="md">$HAPISERVERPATH</code> is described in <a href="#Server_Configuration">Server Configuration</a>. </p>
        <div class="block-info" style="display: none;"><span class="line-numbers">536</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="538" lf="538">If <code type="md">landingFile</code> has local CSS and JS dependencies, set <code type="md">landingPath</code> to be the local directory of the referenced files. Several possible settings are</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">538</span></div>
      </div>
      <div class="block">
        <pre lo="540" lf="545" class="language-javascript"><div class="block"><code lo="541" class="" lf="541"><span class="hljs-string">"landingFile"</span>: <span class="hljs-string">"$HAPISERVERPATH/index.htm"</span>, </code></div><div class="block"><code lo="542" class="" lf="542"><span class="hljs-comment">// $HAPISERVERPATH will be replaced with the location of hapi-server binary</span></code></div><div class="block"><code lo="543" class="" lf="543"><span class="hljs-string">"landingPath"</span>: <span class="hljs-string">"/var/www/public/"</span> <span class="hljs-comment">// Location of CSS and JS files</span></code></div><div class="block"><code lo="544" class="active" lf="544"><span class="hljs-comment">// If index.htm has &lt;script src="index.js"&gt;, index.js should be in /var/www/public/</span></code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">540-545</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="547" lf="547" class="">To serve a directory listing, use, e.g.,</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">547</span></div>
      </div>
      <div class="block">
        <pre lo="549" lf="554" class="language-javascript"><div class="block"><code lo="550" class="" lf="550"><span class="hljs-string">"landingFile"</span>: <span class="hljs-string">""</span>,</code></div><div class="block"><code lo="551" class="" lf="551"><span class="hljs-string">"landingPath"</span>: <span class="hljs-string">"/var/www/public/"</span></code></div><div class="block"><code lo="552" class="" lf="552"><span class="hljs-comment">// Server will look for index.htm and index.html in /var/www/public/. If not</span></code></div><div class="block"><code lo="553" class="" lf="553"><span class="hljs-comment">// found, directory listing of /var/www/public/ will be served.</span></code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">549-554</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="556" lf="556"><a name="614-catalog-update" number="6.1.4" lo="556" raw="### 6.1.4 `catalog-update`" class="anchor hanchor" href="#614-catalog-update" lf="556"><span class="hnumber">6.1.4</span>&nbsp;<span class="htext"><code type="md">catalog-update</code></span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">556</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="558" lf="558">This is an integer number of seconds corresponding to how often the <code type="md">catalog</code> node should be updated. Use this if the <code type="md">catalog</code> node is not static.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">558</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="560" lf="560" class=""><a name="62-catalog" number="6.2" lo="560" raw="## 6.2 catalog" class="anchor hanchor" href="#62-catalog" lf="560"><span class="hnumber">6.2</span>&nbsp;<span class="htext">catalog</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">560</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="562" lf="562">Instead of a <code type="md">catalog</code> node, nodes of <code type="md">catalog_inline</code>, <code type="md">catalog_file</code>, <code type="md">catalog_url</code>, or <code type="md">catalog_command</code> can be used. </p>
        <div class="block-info" style="display: none;"><span class="line-numbers">562</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="564" lf="564"><a name="621-catalog_inline" number="6.2.1" lo="564" raw="### 6.2.1 `catalog_inline`" class="anchor hanchor" href="#621-catalog_inline" lf="564"><span class="hnumber">6.2.1</span>&nbsp;<span class="htext"><code type="md">catalog_inline</code></span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">564</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="566" lf="566">The catalog array should have the same format as a HAPI <code type="md">/catalog</code> response (each object in the array has an <code type="md">id</code> property and optional <code type="md">title</code> property) <strong type="md">with the addition</strong> of an <code type="md">info</code> property that is the HAPI response for that <code type="md">id</code>, e.g., <code type="md">/info?id=dataset1</code>. </p>
        <div class="block-info" style="display: none;"><span class="line-numbers">566</span></div>
      </div>
      <div class="block">
        <pre lo="568" lf="590" class="language-javascript"><div class="block"><code lo="569" lf="569"><span class="hljs-string">"catalog"</span>: <span class="hljs-comment">// or "catalog_inline"</span></code><div class="line-number">1</div></div><div class="block"><code lo="570" lf="570">    [</code><div class="line-number">2</div></div><div class="block"><code lo="571" lf="571">       {</code><div class="line-number">3</div></div><div class="block"><code lo="572" lf="572">        <span class="hljs-string">"id"</span>: <span class="hljs-string">"dataset1"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="573" lf="573">        <span class="hljs-string">"title"</span>: <span class="hljs-string">"a dataset"</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="574" lf="574">        <span class="hljs-string">"info"</span>: {</code><div class="line-number">6</div></div><div class="block"><code lo="575" lf="575">          <span class="hljs-string">"startDate"</span>: <span class="hljs-string">"2000-01-01Z"</span>,</code><div class="line-number">7</div></div><div class="block"><code lo="576" lf="576">          <span class="hljs-string">"stopDate"</span>: <span class="hljs-string">"2000-01-02Z"</span>,</code><div class="line-number">8</div></div><div class="block"><code lo="577" lf="577">          <span class="hljs-string">"parameters"</span>: [...]</code><div class="line-number">9</div></div><div class="block"><code lo="578" lf="578">        }</code><div class="line-number">10</div></div><div class="block"><code lo="579" lf="579">      },</code><div class="line-number">11</div></div><div class="block"><code lo="580" lf="580">      {</code><div class="line-number">12</div></div><div class="block"><code lo="581" lf="581">        <span class="hljs-string">"id"</span>: <span class="hljs-string">"dataset2"</span>,</code><div class="line-number">13</div></div><div class="block"><code lo="582" lf="582">        <span class="hljs-string">"title"</span>: <span class="hljs-string">"another dataset"</span>,</code><div class="line-number">14</div></div><div class="block"><code lo="583" lf="583">        <span class="hljs-string">"info"</span>: {</code><div class="line-number">15</div></div><div class="block"><code lo="584" lf="584">         <span class="hljs-string">"startDate"</span>: <span class="hljs-string">"2000-01-01Z"</span>,</code><div class="line-number">16</div></div><div class="block"><code lo="585" lf="585">         <span class="hljs-string">"stopDate"</span>: <span class="hljs-string">"2000-01-02Z"</span>,</code><div class="line-number">17</div></div><div class="block"><code lo="586" lf="586">         <span class="hljs-string">"parameters"</span>: [...]</code><div class="line-number">18</div></div><div class="block"><code lo="587" lf="587">       }</code><div class="line-number">19</div></div><div class="block"><code lo="588" lf="588">     }</code><div class="line-number">20</div></div><div class="block"><code lo="589" lf="589">    ]</code><div class="line-number">21</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">568-590</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="592" lf="592">Examples of this type of catalog include</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">592</span></div>
      </div>
      <div class="block">
        <ul lo="594" lf="595" class="compact">
          <li markerlength="2" padlength="0" lo="594" lf="594">
            <div class="block">
              <p padlength="0" lo="594" lf="594"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example1.json">Example1.json</a></p>
              <div class="block-info" style="display: none;"><span class="line-numbers">595-597</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="595" lf="597">
            <div class="block">
              <p padlength="0" lo="595" lf="595"><a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/TestData2.0.json">TestData2.0.json</a></p>
              <div class="block-info" style="display: none;"><span class="line-numbers">595</span></div>
            </div>
          </li>
        </ul>
        <div class="block-info" style="display: none;"><span class="line-numbers">594-595</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="597" lf="597">Instead of an <code type="md">info</code> node, nodes of <code type="md">info_inline</code>, <code type="md">info_file</code>, <code type="md">info_url</code>, or <code type="md">info_command</code> can be used. (<code type="md">info</code> is treated the same as <code type="md">info_inline</code>).</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">597</span></div>
      </div>
      <div class="block">
        <pre lo="599" lf="623" class="language-javascript"><div class="block"><code lo="600" lf="600"><span class="hljs-string">"catalog_inline"</span>: </code><div class="line-number">1</div></div><div class="block"><code lo="601" lf="601">  [</code><div class="line-number">2</div></div><div class="block"><code lo="602" lf="602">     {</code><div class="line-number">3</div></div><div class="block"><code lo="603" lf="603">       <span class="hljs-string">"id"</span>: <span class="hljs-string">"dataset1"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="604" lf="604">       <span class="hljs-string">"title"</span>: <span class="hljs-string">"a dataset"</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="605" lf="605">       <span class="hljs-string">"info_file"</span>: <span class="hljs-string">"relativepath/to/${id}/info_file.json"</span></code><div class="line-number">6</div></div><div class="block"><code lo="606" lf="606">      },</code><div class="line-number">7</div></div><div class="block"><code lo="607" lf="607">      {</code><div class="line-number">8</div></div><div class="block"><code lo="608" lf="608">        <span class="hljs-string">"id"</span>: <span class="hljs-string">"dataset2"</span>,</code><div class="line-number">9</div></div><div class="block"><code lo="609" lf="609">        <span class="hljs-string">"title"</span>: <span class="hljs-string">"another dataset"</span>,</code><div class="line-number">10</div></div><div class="block"><code lo="610" lf="610">        <span class="hljs-string">"info_file"</span>: <span class="hljs-string">"/absolutepath/to/${id}/info_file.json"</span></code><div class="line-number">11</div></div><div class="block"><code lo="611" lf="611">      },</code><div class="line-number">12</div></div><div class="block"><code lo="612" lf="612">      {</code><div class="line-number">13</div></div><div class="block"><code lo="613" lf="613">        <span class="hljs-string">"id"</span>: <span class="hljs-string">"dataset3"</span>,</code><div class="line-number">14</div></div><div class="block"><code lo="614" lf="614">        <span class="hljs-string">"title"</span>: <span class="hljs-string">"another dataset"</span>,</code><div class="line-number">15</div></div><div class="block"><code lo="615" lf="615">        <span class="hljs-string">"info_url"</span>: <span class="hljs-string">"http://server/hapi/info?dataset=${id}"</span></code><div class="line-number">16</div></div><div class="block"><code lo="616" lf="616">      },</code><div class="line-number">17</div></div><div class="block"><code lo="617" lf="617">      {</code><div class="line-number">18</div></div><div class="block"><code lo="618" lf="618">        <span class="hljs-string">"id"</span>: <span class="hljs-string">"dataset4"</span>,</code><div class="line-number">19</div></div><div class="block"><code lo="619" lf="619">        <span class="hljs-string">"title"</span>: <span class="hljs-string">"another dataset"</span>,</code><div class="line-number">20</div></div><div class="block"><code lo="620" lf="620">        <span class="hljs-string">"info_command"</span>: <span class="hljs-string">"bin/program --id ${id}"</span></code><div class="line-number">21</div></div><div class="block"><code lo="621" lf="621">      }</code><div class="line-number">22</div></div><div class="block"><code lo="622" lf="622">    ]</code><div class="line-number">23</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">599-623</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="625" lf="625">Relative paths in <code type="md">info_file</code> and <code type="md">info_command</code> are relative to the location of the directory of <code type="md">server.js</code>. See <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example3.json">Example3.json</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">625</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="627" lf="627"><a name="622-catalog_file" number="6.2.2" lo="627" raw="### 6.2.2 `catalog_file`" class="anchor hanchor" href="#622-catalog_file" lf="627"><span class="hnumber">6.2.2</span>&nbsp;<span class="htext"><code type="md">catalog_file</code></span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">627</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="629" lf="630">The file should contain an array with content of the form shown above in <code type="md">catalog_inline</code>. See also <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example6.json">Example3.json</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">629-630</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="632" lf="632"><a name="623-catalog_url" number="6.2.3" lo="632" raw="### 6.2.3 `catalog_url`" class="anchor hanchor" href="#623-catalog_url" lf="632"><span class="hnumber">6.2.3</span>&nbsp;<span class="htext"><code type="md">catalog_url</code></span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">632</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="634" lf="634">The URL should return a HAPI catalog response. The content for the <code type="md">info</code> node is populated automatically. See <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example7.json">Example7.json</a></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">634</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="636" lf="636"><a name="624-catalog_command" number="6.2.4" lo="636" raw="### 6.2.4 `catalog_command`" class="anchor hanchor" href="#624-catalog_command" lf="636"><span class="hnumber">6.2.4</span>&nbsp;<span class="htext"><code type="md">catalog_command</code></span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">636</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="638" lf="638"><code type="md">stdout</code> should contain an array with content of the form shown above in <code type="md">catalog_inline</code>. See <a href="https://github.com/hapi-server/server-nodejs/blob/master/metadata/Example10.json">Example10.json</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">638</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="640" lf="640"><a name="Development"></a></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">640</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="641" lf="641"><a name="7-development" number="7" lo="641" raw="# 7 Development" class="anchor hanchor" href="#7-development" lf="641"><span class="hnumber">7</span>&nbsp;<span class="htext">Development</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">641</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="643" lf="643">Install <a href="https://nodejs.org/en/download/">nodejs</a> (tested with v16+) using either the <a href="https://nodejs.org/en/download/">standard installer</a> or <a href="https://github.com/creationix/nvm#install--update-script">NVM</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">643</span></div>
      </div>
      <div class="block">
        <pre lo="645" lf="653" class="language-bash"><div class="block"><code lo="646" lf="646"><span class="hljs-comment"># Install Node Version Manager</span></code><div class="line-number">1</div></div><div class="block"><code lo="647" lf="647">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | bash</code><div class="line-number">2</div></div><div class="block"><code lo="648" lf="648"></code><div class="line-number">3</div></div><div class="block"><code lo="649" lf="649"><span class="hljs-comment"># Open a new shell (see displayed instructions from above command)</span></code><div class="line-number">4</div></div><div class="block"><code lo="650" lf="650"></code><div class="line-number">5</div></div><div class="block"><code lo="651" lf="651"><span class="hljs-comment"># Install and use node.js version 16</span></code><div class="line-number">6</div></div><div class="block"><code lo="652" lf="652">nvm install 16</code><div class="line-number">7</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">645-653</span></div>
      </div>
      <div class="block">
        <pre lo="655" lf="667" class="language-bash"><div class="block"><code lo="656" lf="656"><span class="hljs-comment"># Clone the server repository</span></code><div class="line-number">1</div></div><div class="block"><code lo="657" lf="657">git <span class="hljs-built_in">clone</span> https://github.com/hapi-server/server-nodejs</code><div class="line-number">2</div></div><div class="block"><code lo="658" lf="658"></code><div class="line-number">3</div></div><div class="block"><code lo="659" lf="659"><span class="hljs-comment"># Install dependencies</span></code><div class="line-number">4</div></div><div class="block"><code lo="660" lf="660"><span class="hljs-built_in">cd</span> server-nodejs; npm install</code><div class="line-number">5</div></div><div class="block"><code lo="661" lf="661"></code><div class="line-number">6</div></div><div class="block"><code lo="662" lf="662"><span class="hljs-comment"># Start server</span></code><div class="line-number">7</div></div><div class="block"><code lo="663" lf="663">node server.js</code><div class="line-number">8</div></div><div class="block"><code lo="664" lf="664"></code><div class="line-number">9</div></div><div class="block"><code lo="665" lf="665"><span class="hljs-comment"># Run tests; Python 2.7+ required for certain tests.</span></code><div class="line-number">10</div></div><div class="block"><code lo="666" lf="666">npm <span class="hljs-built_in">test</span></code><div class="line-number">11</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">655-667</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="669" lf="669"><a name="Contact"></a></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">669</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="670" lf="670"><a name="8-contact" number="8" lo="670" raw="# 8 Contact" class="anchor hanchor" href="#8-contact" lf="670"><span class="hnumber">8</span>&nbsp;<span class="htext">Contact</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">670</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="672" lf="672">Please submit questions, bug reports, and feature requests to the <a href="https://github.com/hapi-server/server-nodejs/issues">issue tracker</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">672</span></div>
      </div>
    </div>
  </div>
</body>

</html>